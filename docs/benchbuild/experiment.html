<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.8.1" />
<title>benchbuild.experiment API documentation</title>
<meta name="description" content="Experiments â€¦" />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet">
<style>.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>benchbuild.experiment</code></h1>
</header>
<section id="section-intro">
<p>Experiments</p>
<p>An experiment in benchbuild is a simple list of actions that need to be
executed on every project that is part of the experiment.
Every <code>callable</code> can serve as an action.</p>
<p>However, benchbuild provides many predefined actions that can
be reused by implementations in the <code><a title="benchbuild.utils.actions" href="utils/actions.html">benchbuild.utils.actions</a></code> module.
Furthermore, if you do not need to control the default order of
actions for a run-time or a compile-time experiment you can reuse the
<code><a title="benchbuild.experiment.Experiment.default_runtime_actions" href="#benchbuild.experiment.Experiment.default_runtime_actions">Experiment.default_runtime_actions()</a></code> or
<code><a title="benchbuild.experiment.Experiment.default_compiletime_actions" href="#benchbuild.experiment.Experiment.default_compiletime_actions">Experiment.default_compiletime_actions()</a></code>.</p>
<p>Besides the list of actions, it is also the responsibility of an experiment
to configure each single project that should take part in an experiment.
This includes setting appropriate <code>CFLAGS</code>, <code>LDFLAGS</code> and any additional
metadata that has to be added to binary runs for later evaluation.</p>
<h2 id="example">Example</h2>
<pre><code class="python">class HelloExperiment(Experiment):
    pass
</code></pre>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;Experiments

An experiment in benchbuild is a simple list of actions that need to be
executed on every project that is part of the experiment.
Every `callable` can serve as an action.

However, benchbuild provides many predefined actions that can
be reused by implementations in the `benchbuild.utils.actions` module.
Furthermore, if you do not need to control the default order of
actions for a run-time or a compile-time experiment you can reuse the
`Experiment.default_runtime_actions` or
`Experiment.default_compiletime_actions`.

Besides the list of actions, it is also the responsibility of an experiment
to configure each single project that should take part in an experiment.
This includes setting appropriate `CFLAGS`, `LDFLAGS` and any additional
metadata that has to be added to binary runs for later evaluation.

Example
-------
```python
class HelloExperiment(Experiment):
    pass
```

&#34;&#34;&#34;
import collections
import copy
import uuid
from abc import abstractmethod

import attr

from benchbuild.settings import CFG
from benchbuild.utils.actions import (Any, Clean, CleanExtra, Compile,
                                      Containerize, Echo, MakeBuildDir,
                                      RequireAll, Run)


class ExperimentRegistry(type):
    &#34;&#34;&#34;Registry for benchbuild experiments.&#34;&#34;&#34;

    experiments = {}

    def __init__(cls, name, bases, _dict):
        &#34;&#34;&#34;Register a project in the registry.&#34;&#34;&#34;
        super(ExperimentRegistry, cls).__init__(name, bases, _dict)

        if cls.NAME is not None:
            ExperimentRegistry.experiments[cls.NAME] = cls


@attr.s(cmp=False)
class Experiment(metaclass=ExperimentRegistry):
    &#34;&#34;&#34;
    A series of commands executed on a project that form an experiment.

    The default implementation should provide a sane environment for all
    derivates.

    One important task executed by the basic implementation is setting up
    the default set of projects that belong to this project.
    As every project gets registered in the ProjectFactory, the experiment
    gets a list of experiment names that work as a filter.

    Attributes:
        name (str): The name of the experiment, defaults to NAME
        projects (:obj:`list` of `benchbuild.project.Project`):
            A list of projects that is assigned to this experiment.
        id (str):
            A uuid encoded as :obj:`str` used to identify this
            instance of experiment. Equivalent to the `experiment_group`
            in the database scheme.
    &#34;&#34;&#34;

    NAME = None
    SCHEMA = None

    def __new__(cls, *args, **kwargs):
        &#34;&#34;&#34;Create a new experiment instance and set some defaults.&#34;&#34;&#34;
        del args, kwargs  # Temporarily unused
        new_self = super(Experiment, cls).__new__(cls)
        if cls.NAME is None:
            raise AttributeError(
                &#34;{0} @ {1} does not define a NAME class attribute.&#34;.format(
                    cls.__name__, cls.__module__))
        return new_self

    name = attr.ib(
        default=attr.Factory(lambda self: type(self).NAME, takes_self=True))

    projects = \
        attr.ib(default=attr.Factory(list))

    id = attr.ib()

    @id.default
    def default_id(self):
        cfg_exps = CFG[&#34;experiments&#34;].value
        if self.name in cfg_exps:
            _id = cfg_exps[self.name]
        else:
            _id = uuid.uuid4()
            cfg_exps[self.name] = _id
            CFG[&#34;experiments&#34;] = cfg_exps
        return _id

    @id.validator
    def validate_id(self, _, new_id):
        if not isinstance(new_id, uuid.UUID):
            raise TypeError(&#34;%s expected to be &#39;%s&#39; but got &#39;%s&#39;&#34; %
                            (str(new_id), str(uuid.UUID), str(type(new_id))))

    schema = attr.ib()

    @schema.default
    def default_schema(self):
        return type(self).SCHEMA

    @schema.validator
    def validate_schema(self, _, new_schema):
        if new_schema is None:
            return True
        if isinstance(new_schema, collections.abc.Iterable):
            return True
        return False

    @abstractmethod
    def actions_for_project(self, project):
        &#34;&#34;&#34;
        Get the actions a project wants to run.

        Args:
            project (benchbuild.Project): the project we want to run.
        &#34;&#34;&#34;

    def actions(self):
        &#34;&#34;&#34;
        Common setup required to run this experiment on all projects.
        &#34;&#34;&#34;
        actions = []

        for project in self.projects:
            prj_cls = self.projects[project]

            prj_actions = []
            for version in self.sample(prj_cls, prj_cls.versions()):
                p = prj_cls(self, version=version)

                atomic_actions = [
                    Clean(p),
                    MakeBuildDir(p),
                    Echo(message=&#34;Selected {0} with version {1}&#34;.format(
                        p.name, p.version)),
                    Containerize(obj=p, actions=self.actions_for_project(p))
                ]
                prj_actions.append(RequireAll(actions=atomic_actions))
            actions.extend(prj_actions)

        actions.append(CleanExtra(self))
        return actions

    def sample(self, prj_cls, versions=None):
        &#34;&#34;&#34;
        Sample all available versions.

        The default sampling returns the latest version only.
        You can override this behavior in custom experiments.

        Args:
            prj_cls (class of benchbuild.project.Project):
                The project class we sample versions for.
            versions (list of str):
                An ordered list of versions for the given prj_cls.
                You can assume that the versions in this list are
                valid version numbers for prj_cls.

        Returns:
            A list of version strings.

        Assumptions:
            versions:
                * semantically ordered, descending.
                * for version in versions:
                    version in prj_cls.versions()
        &#34;&#34;&#34;
        if versions is None:
            versions = prj_cls.versions()

        if not versions:
            # early return if version list is empty
            return

        head, *tail = versions

        yield head
        if bool(CFG[&#34;versions&#34;][&#34;full&#34;]):
            for v in tail:
                yield v

    @staticmethod
    def default_runtime_actions(project):
        &#34;&#34;&#34;Return a series of actions for a run time experiment.&#34;&#34;&#34;
        return [Compile(project), Run(project), Clean(project)]

    @staticmethod
    def default_compiletime_actions(project):
        &#34;&#34;&#34;Return a series of actions for a compile time experiment.&#34;&#34;&#34;
        return [Compile(project), Clean(project)]


class Configuration:
    &#34;&#34;&#34;Build a set of experiment actions out of a list of configurations.&#34;&#34;&#34;

    def __init__(self, project=None, config=None):
        _project = copy.deepcopy(project)
        self.config = {}
        if project is not None and config is not None:
            self.config[_project] = config

    def __add__(self, rhs):
        self.config.update(rhs.config)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="benchbuild.experiment.Configuration"><code class="flex name class">
<span>class <span class="ident">Configuration</span></span>
<span>(</span><span>project=None, config=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Build a set of experiment actions out of a list of configurations.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Configuration:
    &#34;&#34;&#34;Build a set of experiment actions out of a list of configurations.&#34;&#34;&#34;

    def __init__(self, project=None, config=None):
        _project = copy.deepcopy(project)
        self.config = {}
        if project is not None and config is not None:
            self.config[_project] = config

    def __add__(self, rhs):
        self.config.update(rhs.config)</code></pre>
</details>
</dd>
<dt id="benchbuild.experiment.Experiment"><code class="flex name class">
<span>class <span class="ident">Experiment</span></span>
<span>(</span><span>*args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>A series of commands executed on a project that form an experiment.</p>
<p>The default implementation should provide a sane environment for all
derivates.</p>
<p>One important task executed by the basic implementation is setting up
the default set of projects that belong to this project.
As every project gets registered in the ProjectFactory, the experiment
gets a list of experiment names that work as a filter.</p>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>name</code></strong> :&ensp;<code>str</code></dt>
<dd>The name of the experiment, defaults to NAME</dd>
</dl>
<p>projects (:obj:<code>list</code> of <code><a title="benchbuild.project.Project" href="project.html#benchbuild.project.Project">Project</a></code>):
A list of projects that is assigned to this experiment.
id (str):
A uuid encoded as :obj:<code>str</code> used to identify this
instance of experiment. Equivalent to the <code>experiment_group</code>
in the database scheme.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Experiment(metaclass=ExperimentRegistry):
    &#34;&#34;&#34;
    A series of commands executed on a project that form an experiment.

    The default implementation should provide a sane environment for all
    derivates.

    One important task executed by the basic implementation is setting up
    the default set of projects that belong to this project.
    As every project gets registered in the ProjectFactory, the experiment
    gets a list of experiment names that work as a filter.

    Attributes:
        name (str): The name of the experiment, defaults to NAME
        projects (:obj:`list` of `benchbuild.project.Project`):
            A list of projects that is assigned to this experiment.
        id (str):
            A uuid encoded as :obj:`str` used to identify this
            instance of experiment. Equivalent to the `experiment_group`
            in the database scheme.
    &#34;&#34;&#34;

    NAME = None
    SCHEMA = None

    def __new__(cls, *args, **kwargs):
        &#34;&#34;&#34;Create a new experiment instance and set some defaults.&#34;&#34;&#34;
        del args, kwargs  # Temporarily unused
        new_self = super(Experiment, cls).__new__(cls)
        if cls.NAME is None:
            raise AttributeError(
                &#34;{0} @ {1} does not define a NAME class attribute.&#34;.format(
                    cls.__name__, cls.__module__))
        return new_self

    name = attr.ib(
        default=attr.Factory(lambda self: type(self).NAME, takes_self=True))

    projects = \
        attr.ib(default=attr.Factory(list))

    id = attr.ib()

    @id.default
    def default_id(self):
        cfg_exps = CFG[&#34;experiments&#34;].value
        if self.name in cfg_exps:
            _id = cfg_exps[self.name]
        else:
            _id = uuid.uuid4()
            cfg_exps[self.name] = _id
            CFG[&#34;experiments&#34;] = cfg_exps
        return _id

    @id.validator
    def validate_id(self, _, new_id):
        if not isinstance(new_id, uuid.UUID):
            raise TypeError(&#34;%s expected to be &#39;%s&#39; but got &#39;%s&#39;&#34; %
                            (str(new_id), str(uuid.UUID), str(type(new_id))))

    schema = attr.ib()

    @schema.default
    def default_schema(self):
        return type(self).SCHEMA

    @schema.validator
    def validate_schema(self, _, new_schema):
        if new_schema is None:
            return True
        if isinstance(new_schema, collections.abc.Iterable):
            return True
        return False

    @abstractmethod
    def actions_for_project(self, project):
        &#34;&#34;&#34;
        Get the actions a project wants to run.

        Args:
            project (benchbuild.Project): the project we want to run.
        &#34;&#34;&#34;

    def actions(self):
        &#34;&#34;&#34;
        Common setup required to run this experiment on all projects.
        &#34;&#34;&#34;
        actions = []

        for project in self.projects:
            prj_cls = self.projects[project]

            prj_actions = []
            for version in self.sample(prj_cls, prj_cls.versions()):
                p = prj_cls(self, version=version)

                atomic_actions = [
                    Clean(p),
                    MakeBuildDir(p),
                    Echo(message=&#34;Selected {0} with version {1}&#34;.format(
                        p.name, p.version)),
                    Containerize(obj=p, actions=self.actions_for_project(p))
                ]
                prj_actions.append(RequireAll(actions=atomic_actions))
            actions.extend(prj_actions)

        actions.append(CleanExtra(self))
        return actions

    def sample(self, prj_cls, versions=None):
        &#34;&#34;&#34;
        Sample all available versions.

        The default sampling returns the latest version only.
        You can override this behavior in custom experiments.

        Args:
            prj_cls (class of benchbuild.project.Project):
                The project class we sample versions for.
            versions (list of str):
                An ordered list of versions for the given prj_cls.
                You can assume that the versions in this list are
                valid version numbers for prj_cls.

        Returns:
            A list of version strings.

        Assumptions:
            versions:
                * semantically ordered, descending.
                * for version in versions:
                    version in prj_cls.versions()
        &#34;&#34;&#34;
        if versions is None:
            versions = prj_cls.versions()

        if not versions:
            # early return if version list is empty
            return

        head, *tail = versions

        yield head
        if bool(CFG[&#34;versions&#34;][&#34;full&#34;]):
            for v in tail:
                yield v

    @staticmethod
    def default_runtime_actions(project):
        &#34;&#34;&#34;Return a series of actions for a run time experiment.&#34;&#34;&#34;
        return [Compile(project), Run(project), Clean(project)]

    @staticmethod
    def default_compiletime_actions(project):
        &#34;&#34;&#34;Return a series of actions for a compile time experiment.&#34;&#34;&#34;
        return [Compile(project), Clean(project)]</code></pre>
</details>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="benchbuild.experiments.empty.Empty" href="experiments/empty.html#benchbuild.experiments.empty.Empty">Empty</a></li>
<li><a title="benchbuild.experiments.empty.NoMeasurement" href="experiments/empty.html#benchbuild.experiments.empty.NoMeasurement">NoMeasurement</a></li>
<li><a title="benchbuild.experiments.raw.RawRuntime" href="experiments/raw.html#benchbuild.experiments.raw.RawRuntime">RawRuntime</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="benchbuild.experiment.Experiment.NAME"><code class="name">var <span class="ident">NAME</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="benchbuild.experiment.Experiment.SCHEMA"><code class="name">var <span class="ident">SCHEMA</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Static methods</h3>
<dl>
<dt id="benchbuild.experiment.Experiment.default_compiletime_actions"><code class="name flex">
<span>def <span class="ident">default_compiletime_actions</span></span>(<span>project)</span>
</code></dt>
<dd>
<div class="desc"><p>Return a series of actions for a compile time experiment.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def default_compiletime_actions(project):
    &#34;&#34;&#34;Return a series of actions for a compile time experiment.&#34;&#34;&#34;
    return [Compile(project), Clean(project)]</code></pre>
</details>
</dd>
<dt id="benchbuild.experiment.Experiment.default_runtime_actions"><code class="name flex">
<span>def <span class="ident">default_runtime_actions</span></span>(<span>project)</span>
</code></dt>
<dd>
<div class="desc"><p>Return a series of actions for a run time experiment.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def default_runtime_actions(project):
    &#34;&#34;&#34;Return a series of actions for a run time experiment.&#34;&#34;&#34;
    return [Compile(project), Run(project), Clean(project)]</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="benchbuild.experiment.Experiment.actions"><code class="name flex">
<span>def <span class="ident">actions</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Common setup required to run this experiment on all projects.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def actions(self):
    &#34;&#34;&#34;
    Common setup required to run this experiment on all projects.
    &#34;&#34;&#34;
    actions = []

    for project in self.projects:
        prj_cls = self.projects[project]

        prj_actions = []
        for version in self.sample(prj_cls, prj_cls.versions()):
            p = prj_cls(self, version=version)

            atomic_actions = [
                Clean(p),
                MakeBuildDir(p),
                Echo(message=&#34;Selected {0} with version {1}&#34;.format(
                    p.name, p.version)),
                Containerize(obj=p, actions=self.actions_for_project(p))
            ]
            prj_actions.append(RequireAll(actions=atomic_actions))
        actions.extend(prj_actions)

    actions.append(CleanExtra(self))
    return actions</code></pre>
</details>
</dd>
<dt id="benchbuild.experiment.Experiment.actions_for_project"><code class="name flex">
<span>def <span class="ident">actions_for_project</span></span>(<span>self, project)</span>
</code></dt>
<dd>
<div class="desc"><p>Get the actions a project wants to run.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>project</code></strong> :&ensp;<code>benchbuild.Project</code></dt>
<dd>the project we want to run.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@abstractmethod
def actions_for_project(self, project):
    &#34;&#34;&#34;
    Get the actions a project wants to run.

    Args:
        project (benchbuild.Project): the project we want to run.
    &#34;&#34;&#34;</code></pre>
</details>
</dd>
<dt id="benchbuild.experiment.Experiment.default_id"><code class="name flex">
<span>def <span class="ident">default_id</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@id.default
def default_id(self):
    cfg_exps = CFG[&#34;experiments&#34;].value
    if self.name in cfg_exps:
        _id = cfg_exps[self.name]
    else:
        _id = uuid.uuid4()
        cfg_exps[self.name] = _id
        CFG[&#34;experiments&#34;] = cfg_exps
    return _id</code></pre>
</details>
</dd>
<dt id="benchbuild.experiment.Experiment.default_schema"><code class="name flex">
<span>def <span class="ident">default_schema</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@schema.default
def default_schema(self):
    return type(self).SCHEMA</code></pre>
</details>
</dd>
<dt id="benchbuild.experiment.Experiment.sample"><code class="name flex">
<span>def <span class="ident">sample</span></span>(<span>self, prj_cls, versions=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Sample all available versions.</p>
<p>The default sampling returns the latest version only.
You can override this behavior in custom experiments.</p>
<h2 id="args">Args</h2>
<p>prj_cls (class of benchbuild.project.Project):
The project class we sample versions for.
versions (list of str):
An ordered list of versions for the given prj_cls.
You can assume that the versions in this list are
valid version numbers for prj_cls.</p>
<h2 id="returns">Returns</h2>
<p>A list of version strings.</p>
<h2 id="assumptions">Assumptions</h2>
<p>versions:
* semantically ordered, descending.
* for version in versions:
version in prj_cls.versions()</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def sample(self, prj_cls, versions=None):
    &#34;&#34;&#34;
    Sample all available versions.

    The default sampling returns the latest version only.
    You can override this behavior in custom experiments.

    Args:
        prj_cls (class of benchbuild.project.Project):
            The project class we sample versions for.
        versions (list of str):
            An ordered list of versions for the given prj_cls.
            You can assume that the versions in this list are
            valid version numbers for prj_cls.

    Returns:
        A list of version strings.

    Assumptions:
        versions:
            * semantically ordered, descending.
            * for version in versions:
                version in prj_cls.versions()
    &#34;&#34;&#34;
    if versions is None:
        versions = prj_cls.versions()

    if not versions:
        # early return if version list is empty
        return

    head, *tail = versions

    yield head
    if bool(CFG[&#34;versions&#34;][&#34;full&#34;]):
        for v in tail:
            yield v</code></pre>
</details>
</dd>
<dt id="benchbuild.experiment.Experiment.validate_id"><code class="name flex">
<span>def <span class="ident">validate_id</span></span>(<span>self, _, new_id)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@id.validator
def validate_id(self, _, new_id):
    if not isinstance(new_id, uuid.UUID):
        raise TypeError(&#34;%s expected to be &#39;%s&#39; but got &#39;%s&#39;&#34; %
                        (str(new_id), str(uuid.UUID), str(type(new_id))))</code></pre>
</details>
</dd>
<dt id="benchbuild.experiment.Experiment.validate_schema"><code class="name flex">
<span>def <span class="ident">validate_schema</span></span>(<span>self, _, new_schema)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@schema.validator
def validate_schema(self, _, new_schema):
    if new_schema is None:
        return True
    if isinstance(new_schema, collections.abc.Iterable):
        return True
    return False</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="benchbuild.experiment.ExperimentRegistry"><code class="flex name class">
<span>class <span class="ident">ExperimentRegistry</span></span>
<span>(</span><span>name, bases, _dict)</span>
</code></dt>
<dd>
<div class="desc"><p>Registry for benchbuild experiments.</p>
<p>Register a project in the registry.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ExperimentRegistry(type):
    &#34;&#34;&#34;Registry for benchbuild experiments.&#34;&#34;&#34;

    experiments = {}

    def __init__(cls, name, bases, _dict):
        &#34;&#34;&#34;Register a project in the registry.&#34;&#34;&#34;
        super(ExperimentRegistry, cls).__init__(name, bases, _dict)

        if cls.NAME is not None:
            ExperimentRegistry.experiments[cls.NAME] = cls</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>builtins.type</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="benchbuild.experiment.ExperimentRegistry.experiments"><code class="name">var <span class="ident">experiments</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul>
<li><a href="#example">Example</a></li>
</ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="benchbuild" href="index.html">benchbuild</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="benchbuild.experiment.Configuration" href="#benchbuild.experiment.Configuration">Configuration</a></code></h4>
</li>
<li>
<h4><code><a title="benchbuild.experiment.Experiment" href="#benchbuild.experiment.Experiment">Experiment</a></code></h4>
<ul class="">
<li><code><a title="benchbuild.experiment.Experiment.NAME" href="#benchbuild.experiment.Experiment.NAME">NAME</a></code></li>
<li><code><a title="benchbuild.experiment.Experiment.SCHEMA" href="#benchbuild.experiment.Experiment.SCHEMA">SCHEMA</a></code></li>
<li><code><a title="benchbuild.experiment.Experiment.actions" href="#benchbuild.experiment.Experiment.actions">actions</a></code></li>
<li><code><a title="benchbuild.experiment.Experiment.actions_for_project" href="#benchbuild.experiment.Experiment.actions_for_project">actions_for_project</a></code></li>
<li><code><a title="benchbuild.experiment.Experiment.default_compiletime_actions" href="#benchbuild.experiment.Experiment.default_compiletime_actions">default_compiletime_actions</a></code></li>
<li><code><a title="benchbuild.experiment.Experiment.default_id" href="#benchbuild.experiment.Experiment.default_id">default_id</a></code></li>
<li><code><a title="benchbuild.experiment.Experiment.default_runtime_actions" href="#benchbuild.experiment.Experiment.default_runtime_actions">default_runtime_actions</a></code></li>
<li><code><a title="benchbuild.experiment.Experiment.default_schema" href="#benchbuild.experiment.Experiment.default_schema">default_schema</a></code></li>
<li><code><a title="benchbuild.experiment.Experiment.sample" href="#benchbuild.experiment.Experiment.sample">sample</a></code></li>
<li><code><a title="benchbuild.experiment.Experiment.validate_id" href="#benchbuild.experiment.Experiment.validate_id">validate_id</a></code></li>
<li><code><a title="benchbuild.experiment.Experiment.validate_schema" href="#benchbuild.experiment.Experiment.validate_schema">validate_schema</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="benchbuild.experiment.ExperimentRegistry" href="#benchbuild.experiment.ExperimentRegistry">ExperimentRegistry</a></code></h4>
<ul class="">
<li><code><a title="benchbuild.experiment.ExperimentRegistry.experiments" href="#benchbuild.experiment.ExperimentRegistry.experiments">experiments</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.8.1</a>.</p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>